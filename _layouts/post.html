---
layout: default
---
<article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">
  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">{{ page.title | escape }}</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="{{ page.date | date_to_xmlschema }}" itemprop="datePublished">
        {{ page.date | date: "%Yë…„ %mì›” %dì¼" }}
      </time>
      {% if page.author %}
        â€¢ <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <span class="p-author h-card" itemprop="name">{{ page.author }}</span>
          </span>
      {% endif %}
    </p>

    <!-- ë‹¤ìš´ë¡œë“œ ë²„íŠ¼ -->
    {% if page.downloadable != false %}
    <div class="post-actions">
      <button class="download-btn" onclick="downloadAsMarkdown()" title="ë§ˆí¬ë‹¤ìš´ìœ¼ë¡œ ë‹¤ìš´ë¡œë“œ">
        ğŸ“¥ MD
      </button>
      <button class="download-btn" onclick="printPost()" title="PDFë¡œ ì¸ì‡„/ì €ì¥">
        ğŸ–¨ï¸ PDF
      </button>
      <button class="download-btn" onclick="copyToClipboard()" title="í´ë¦½ë³´ë“œì— ë³µì‚¬">
        ğŸ“‹ ë³µì‚¬
      </button>
    </div>
    {% endif %}
  </header>

  <div class="post-content e-content" itemprop="articleBody" id="post-content">
    {{ content }}
  </div>

  {% if page.tags.size > 0 %}
  <div class="post-tags">
    <strong>íƒœê·¸:</strong>
    {% for tag in page.tags %}
      <span class="tag">{{ tag }}</span>
    {% endfor %}
  </div>
  {% endif %}

  <a class="u-url" href="{{ page.url | relative_url }}" hidden></a>
</article>

{% if page.downloadable != false %}
<script>
// ë§ˆí¬ë‹¤ìš´ ë‹¤ìš´ë¡œë“œ
function downloadAsMarkdown() {
  const title = "{{ page.title | escape }}";
  const date = "{{ page.date | date: '%Y-%m-%d' }}";
  const content = document.getElementById('post-content').innerText;

  const markdown = `# ${title}\n\n*${date}*\n\n${content}`;

  const blob = new Blob([markdown], { type: 'text/markdown;charset=utf-8' });
  const url = URL.createObjectURL(blob);
  const a = document.createElement('a');
  a.href = url;
  a.download = `${date}-${title.replace(/[^a-zA-Z0-9ê°€-í£]/g, '-')}.md`;
  document.body.appendChild(a);
  a.click();
  document.body.removeChild(a);
  URL.revokeObjectURL(url);
}

// PDF ì¸ì‡„ (ë¸Œë¼ìš°ì € ì¸ì‡„ ëŒ€í™”ìƒì)
function printPost() {
  window.print();
}

// í´ë¦½ë³´ë“œ ë³µì‚¬
function copyToClipboard() {
  const content = document.getElementById('post-content').innerText;
  navigator.clipboard.writeText(content).then(() => {
    alert('ë‚´ìš©ì´ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤!');
  }).catch(err => {
    console.error('ë³µì‚¬ ì‹¤íŒ¨:', err);
    alert('ë³µì‚¬ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
  });
}
</script>

<style>
.post-actions {
  margin-top: 1rem;
  display: flex;
  gap: 0.5rem;
  flex-wrap: wrap;
}

.download-btn {
  background: #f5f5f5;
  border: 1px solid #ddd;
  border-radius: 4px;
  padding: 0.5rem 1rem;
  cursor: pointer;
  font-size: 0.9rem;
  transition: all 0.2s;
}

.download-btn:hover {
  background: #e0e0e0;
  border-color: #ccc;
}

@media print {
  .post-actions,
  .site-header,
  .site-footer,
  .post-tags {
    display: none !important;
  }

  .post-content {
    font-size: 12pt;
    line-height: 1.6;
  }

  @page {
    margin: 2cm;
  }
}
</style>
{% endif %}
